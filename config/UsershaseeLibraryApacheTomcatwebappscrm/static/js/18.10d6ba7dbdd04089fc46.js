webpackJsonp([18],{Y9XR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("NYxO");var l=a("Wxq9"),r={data:function(){return{jzl:[],tableData:[],addLabel:[],addForm:{area:[]},rules:{name:[{required:!0,message:"请选择客户",trigger:"blur"}],phone:[{required:!0,message:"请输入电话",trigger:"blur"}]},options:l.regionData,dsQuery:{name:"",phone:"",power:"",create_time:[]},query_show:!1,dialogAddVisible:!1,selectValue:[],currentPage:1,pagesize:20}},mounted:function(){var e=this;this.$post("/crm/getDict",{list:["crm-jzl"]},function(t){e.jzl=t["crm-jzl"]})},activated:function(){this.getData()},methods:{getData:function(){var e=this;this.$post("/crm/competitorPR/getAll",this.dsQuery,function(t){e.tableData=t.list})},addOpen:function(){this.dialogAddVisible=!0},openModal:function(){var e=this;this.addLabel.length||this.$post("/crm/extFieldPR/getField",{tableName:"crm_competitor"},function(t){e.addLabel=t.list})},closeModal:function(){this.addForm={area:[]}},addSave:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$post("/crm/competitorPR/addOne",e.addForm,function(t){e.$notify.success({message:"操作成功！"}),e.getData(),e.dialogAddVisible=!1})})},deleteBtn:function(){var e=this;this.selectValue.length<1?this.$message.error("请勾选数据！"):this._confirm("确定删除吗?",function(){var t=[];e.selectValue.map(function(e){t.push(e.id)}),e.$post("/crm/competitorPR/delete",{list:t},function(t){t.message?e.$message.error(t.message):e.$message.success("删除成功！"),e.$refs.table.clearSelection(),e.getData()})})},handleSelectionChange:function(e){this.selectValue=e},handleCurrentChange:function(e){this.currentPage=e}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[a("el-form",{staticClass:"query-form",attrs:{"label-position":"left",size:"small",inline:!0,model:e.dsQuery,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{clearable:"",placeholder:""},model:{value:e.dsQuery.name,callback:function(t){e.$set(e.dsQuery,"name",t)},expression:"dsQuery.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getData}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[e._v("\n          "),a("a",{staticClass:"text-base",on:{click:function(t){e.query_show=!e.query_show}}},[e._v("更多查询条件"),a("i",{class:"iconfont icon-"+e.query_show})])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.query_show,expression:"query_show"}]},[a("div",{staticClass:"input-box"},[a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{attrs:{placeholder:"",clearable:""},model:{value:e.dsQuery.phone,callback:function(t){e.$set(e.dsQuery,"phone",t)},expression:"dsQuery.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"竞争力"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.dsQuery.power,callback:function(t){e.$set(e.dsQuery,"power",t)},expression:"dsQuery.power"}},e._l(e.jzl,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"250px","margin-right":"30px"},attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","default-time":["00:00:00","23:59:59"]},model:{value:e.dsQuery.create_time,callback:function(t){e.$set(e.dsQuery,"create_time",t)},expression:"dsQuery.create_time"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addOpen}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.deleteBtn}},[e._v("删除")])],1),e._v(" "),a("el-table",{ref:"table",staticClass:"table",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),"max-height":"500",border:"","default-sort":{prop:"name",order:"creatTime"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{staticClass:"text-base",attrs:{to:"./competitor_detail?id="+t.row.id}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"scale",label:"规模"}}),e._v(" "),a("el-table-column",{attrs:{prop:"power",label:"竞争力"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createUserCname",label:"创建者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.createTime.split(" ")[0])+"\n      ")]}}])})],1),e._v(" "),a("br"),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next","page-size":e.pagesize,"current-page":e.currentPage,total:e.tableData.length},on:{"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{staticClass:"dialogAdd",attrs:{title:"新增竞争对手",width:"600px",visible:e.dialogAddVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogAddVisible=t},open:e.openModal,close:e.closeModal}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-position":"left","label-width":"120px",size:"small"}},e._l(e.addLabel,function(t,l){return a("el-form-item",{key:l,attrs:{prop:t.name,label:t.label}},["text"==t.editorType?a("el-input",{attrs:{type:"textarea",resize:"none",autosize:""},model:{value:e.addForm[t.name],callback:function(a){e.$set(e.addForm,t.name,a)},expression:"addForm[item.name]"}}):e._e(),e._v(" "),"date"==t.editorType?a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.addForm[t.name],callback:function(a){e.$set(e.addForm,t.name,a)},expression:"addForm[item.name]"}}):e._e(),e._v(" "),"dict"==t.editorType?a("el-select",{model:{value:e.addForm[t.name],callback:function(a){e.$set(e.addForm,t.name,a)},expression:"addForm[item.name]"}},e._l(t.selectList,function(l){return"dict"==t.editorType?a("el-option",{key:l,attrs:{label:l,value:l}}):e._e()})):e._e(),e._v(" "),"cascade"==t.editorType?a("el-cascader",{attrs:{size:"small",options:e.cityData()},model:{value:e.addForm[t.name],callback:function(a){e.$set(e.addForm,t.name,a)},expression:"addForm[item.name]"}}):e._e()],1)})),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAddVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addSave}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(r,o,!1,function(e){a("i55D")},"data-v-733effce",null);t.default=s.exports},i55D:function(e,t){}});
//# sourceMappingURL=18.10d6ba7dbdd04089fc46.js.map