webpackJsonp([20],{"4yh6":function(t,e){},"7re3":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("mvHQ"),l=a.n(r),o=(a("NYxO"),{data:function(){return{num:1,activeName:"first",queryForm:{reportType:""},tableData:[],currentPage:1,pagesize:2,dialogAddVisible:!1,formAdd:{report_type:"日报",date:new Date,summary:"",plan:""},numberValidateForm:{age:""}}},activated:function(){this.initCrmWorkReport=function(){var t=this;this.$axios.post(this.$store.state.crmPath+"/crmWorkReportPR/queryCrmWorkReport").then(function(e){t.tableData=e.data,console.log(e.data)})},this.initCrmWorkReport()},methods:{handleFilter:function(t){var e=new URLSearchParams;e.append("data",l()(this.queryForm)),this.$axios.post(this.$store.state.crmPath+"/crmWorkReportPR/queryCrmWorkReport",e).then(function(t){console.log(t.data)})},handleCurrentChange:function(t){this.currentPage=t},workReportSave:function(){var t=this,e=new URLSearchParams,a=this.formAdd;e.append("data",l()(a)),this.$refs.formAdd.resetFields(),this.$axios.post(url,e).then(function(e){t.$notify({message:"操作成功！",position:"bottom-right"}),t.tableData.unshift(t.deepClone(a)),t.dialogAddVisible=!1,t.$refs.formAdd.resetFields()}).then(function(t){console.log(3)})},handleDel:function(t){this.tableData.splice(t,1);this.$createElement;this.$msgbox({title:"提示",message:"确定要删除【xxxx】吗？",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){console.log(2)}).catch(function(){})}}}),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap work-report"},[a("el-form",{ref:"form",attrs:{"label-width":"84px",size:"small"}},[a("el-form-item",{attrs:{label:"报告类型："}},[a("el-select",{on:{change:t.handleFilter},model:{value:t.queryForm.reportType,callback:function(e){t.$set(t.queryForm,"reportType",e)},expression:"queryForm.reportType"}},[a("el-option",{attrs:{label:"日报",value:"日报"}}),t._v(" "),a("el-option",{attrs:{label:"月报",value:"月报"}}),t._v(" "),a("el-option",{attrs:{label:"周报",value:"周报"}})],1)],1),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogAddVisible=!0}}},[t._v("新增工作报告")])],1),t._v(" "),a("el-table",{staticClass:"table",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.tableData.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),"max-height":"500",border:"","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},"default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{prop:"date",sortable:"",label:"日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.formatDate(new Date(e.row.date))))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"report_type",label:"报告类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"summary",label:"总结"}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"text-base",staticStyle:{"margin-right":"10px"}},[t._v("编辑")]),t._v(" "),a("a",{staticClass:"text-base",on:{click:function(a){t.handleDel(e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.tableData.length?a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next","page-size":t.pagesize,"current-page":t.currentPage,total:t.tableData.length},on:{"current-change":t.handleCurrentChange}}):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"新增工作报告",visible:t.dialogAddVisible,"close-on-click-modal":!1,width:"550px"},on:{"update:visible":function(e){t.dialogAddVisible=e}}},[a("el-form",{ref:"formAdd",attrs:{inline:!0,model:t.formAdd}},[a("el-form-item",{staticStyle:{"margin-right":"76px"},attrs:{label:"类型：",prop:"report_type"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",size:"small"},model:{value:t.formAdd.report_type,callback:function(e){t.$set(t.formAdd,"report_type",e)},expression:"formAdd.report_type"}},[a("el-option",{attrs:{label:"日报",value:"日报"}}),t._v(" "),a("el-option",{attrs:{label:"周报",value:"周报"}}),t._v(" "),a("el-option",{attrs:{label:"月报",value:"月报"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"date"}},[a("el-date-picker",{attrs:{type:"date",size:"small",format:"yyyy-MM-dd",placeholder:"选择日期时间"},model:{value:t.formAdd.date,callback:function(e){t.$set(t.formAdd,"date",e)},expression:"formAdd.date"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"总结：",prop:"summary"}},[a("el-input",{staticStyle:{width:"401px"},attrs:{type:"textarea",placeholder:"",rows:4},model:{value:t.formAdd.summary,callback:function(e){t.$set(t.formAdd,"summary",e)},expression:"formAdd.summary"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"计划：",prop:"plan"}},[a("el-input",{staticStyle:{width:"401px"},attrs:{type:"textarea",placeholder:"",rows:4},model:{value:t.formAdd.plan,callback:function(e){t.$set(t.formAdd,"plan",e)},expression:"formAdd.plan"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogAddVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.workReportSave}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(o,n,!1,function(t){a("4yh6")},"data-v-7093ab18",null);e.default=s.exports}});
//# sourceMappingURL=20.62b5adfe502d41505270.js.map