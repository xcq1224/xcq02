webpackJsonp([14],{"7rNr":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l("bOdI"),a=l.n(i),s=(l("NYxO"),{data:function(){return{currentPage:1,pagesize:50,tableData:[],dialogVisible:!1,savaflag:"",crmCustomerFieldAdd:a()({id:"",fieldNo:"",fieldName:"",isShow:"",fieldType:"",cosSpan:""},"isShow",""),selectValue:[],true_or_false:[{value:"true",label:"是"},{value:"false",label:"否"}],field_type:[{value:"text",label:"文本"},{value:"date",label:"时间"},{value:"dict",label:"字典"},{value:"boolean",label:"boolean类型"}],field_rules:{fieldNo:[{required:!0,message:"请输入中文显示",trigger:"blur"}],fieldName:[{required:!0,message:"请输入中文显示",trigger:"blur"}],isShow:[{required:!0,message:"请选择是否显示",trigger:"blur"}],fieldType:[{required:!0,message:"请选择字段类型",trigger:"blur"}]}}},mounted:function(){this.initTableData=function(){var e=this;this.$post("/crm/contactsFieldPR/queryCrmContactsField",{},function(t){e.tableData=t.list})},this.initTableData()},methods:{handleCurrentChange:function(e){this.currentPage=e},dlgClose:function(e){this.$refs[e].resetFields()},add_crm_contacts_field:function(){var e=this;this.savaflag="add",this.dialogVisible=!0;var t=this.$store.state.crmPath+"/crm/contactsFieldPR/getDefaultFieldNo";this.$axios.post(t).then(function(t){e.crmCustomerFieldAdd.fieldNo=t.data.field_no,e.crmCustomerFieldAdd.sortNum=t.data.sortNo})},updateCrmCustomerField:function(){1==this.selectValue.length?(this.crmCustomerFieldAdd=this.selectValue[0],this.savaflag="edit",this.dialogVisible=!0):this.$notify({message:"请勾选一条数据！",position:"bottom-right"})},deleteCrmCustomerField:function(){var e=this;if(this.selectValue.length<1)this.$notify({message:"请勾选数据！",position:"bottom-right"});else{var t=[];this.selectValue.map(function(e){t.push(e.id)});var l=this.$store.state.crmPath+"/crm/contactsFieldPR/deleteCrmContactsField";this.$axios.post(l,{list:t}).then(function(t){e.initTableData(),e.$notify({message:"操作成功！",position:"bottom-right"})})}},crmCustomerFieldSave:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var l="";"add"==t.savaflag&&(l=t.$store.state.crmPath+"/crm/contactsFieldPR/addCrmContactsField"),"edit"==t.savaflag&&(l=t.$store.state.crmPath+"/crm/contactsFieldPR/updateCrmContactsField"),t.$axios.post(l,t.crmCustomerFieldAdd).then(function(e){t.$notify({message:"操作成功！",position:"bottom-right"}),t.initTableData(),t.dialogVisible=!1})})},handleSelectionChange:function(e){this.selectValue=e}}}),r={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"wrap"},[l("el-row",[l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.add_crm_contacts_field()}}},[e._v("新增")]),e._v(" "),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.updateCrmCustomerField()}}},[e._v("修改")]),e._v(" "),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.deleteCrmCustomerField()}}},[e._v("删除")])],1),e._v(" "),l("br"),e._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),border:"","default-sort":{prop:"sortNum",order:"descending"}},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{prop:"fieldNo",label:"字段名称",width:"180"}}),e._v(" "),l("el-table-column",{attrs:{prop:"fieldName",label:"中文显示"}}),e._v(" "),l("el-table-column",{attrs:{prop:"isShow",label:"是否显示"}}),e._v(" "),l("el-table-column",{attrs:{prop:"fieldType",label:"字段类型"}}),e._v(" "),l("el-table-column",{attrs:{prop:"cosSpan",label:"占格数"}}),e._v(" "),l("el-table-column",{attrs:{prop:"sortNum",label:"排序"}})],1),e._v(" "),l("el-dialog",{attrs:{title:"",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.dlgClose("crmCustomerFieldAdd")}}},[l("el-form",{ref:"crmCustomerFieldAdd",attrs:{model:e.crmCustomerFieldAdd,rules:e.field_rules,"label-position":"left","label-width":"120px",size:"small"}},[l("el-form-item",{attrs:{label:"字段名称:",prop:"fieldNo"}},[l("el-input",{attrs:{disabled:!0},model:{value:e.crmCustomerFieldAdd.fieldNo,callback:function(t){e.$set(e.crmCustomerFieldAdd,"fieldNo",t)},expression:"crmCustomerFieldAdd.fieldNo"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"中文显示:",prop:"fieldName"}},[l("el-input",{model:{value:e.crmCustomerFieldAdd.fieldName,callback:function(t){e.$set(e.crmCustomerFieldAdd,"fieldName",t)},expression:"crmCustomerFieldAdd.fieldName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"是否显示:",prop:"isShow"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.crmCustomerFieldAdd.isShow,callback:function(t){e.$set(e.crmCustomerFieldAdd,"isShow",t)},expression:"crmCustomerFieldAdd.isShow"}},e._l(e.true_or_false,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"字段类型:",prop:"fieldType"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.crmCustomerFieldAdd.fieldType,callback:function(t){e.$set(e.crmCustomerFieldAdd,"fieldType",t)},expression:"crmCustomerFieldAdd.fieldType"}},e._l(e.field_type,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"字典名:",prop:"dictName"}},[l("el-input",{model:{value:e.crmCustomerFieldAdd.dictName,callback:function(t){e.$set(e.crmCustomerFieldAdd,"dictName",t)},expression:"crmCustomerFieldAdd.dictName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"占格数:",prop:"cosSpan"}},[l("el-input",{model:{value:e.crmCustomerFieldAdd.cosSpan,callback:function(t){e.$set(e.crmCustomerFieldAdd,"cosSpan",t)},expression:"crmCustomerFieldAdd.cosSpan"}})],1),e._v(" "),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"主键:",prop:"id"}},[l("el-input",{attrs:{disabled:!0},model:{value:e.crmCustomerFieldAdd.id,callback:function(t){e.$set(e.crmCustomerFieldAdd,"id",t)},expression:"crmCustomerFieldAdd.id"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"排序:",prop:"sortNum"}},[l("el-input",{model:{value:e.crmCustomerFieldAdd.sortNum,callback:function(t){e.$set(e.crmCustomerFieldAdd,"sortNum",t)},expression:"crmCustomerFieldAdd.sortNum"}})],1)],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.crmCustomerFieldSave("crmCustomerFieldAdd")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=l("VU/8")(s,r,!1,function(e){l("M2Uu")},"data-v-a82a2410",null);t.default=o.exports},M2Uu:function(e,t){}});
//# sourceMappingURL=14.4090f9649ab997fde5d7.js.map