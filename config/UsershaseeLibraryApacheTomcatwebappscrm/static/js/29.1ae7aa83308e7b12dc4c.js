webpackJsonp([29],{TFZR:function(t,e){},vVmn:function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});l("NYxO");var a=l("Wxq9"),o={data:function(){var t=this;return{query:{},activeName:"first",formBasicInfo:{},formAdd:{},formContract:{},formEdit:{},formLost:{},formTransfer:{},dialogAddVisible:!1,dialogEditVisible:!1,dialogDelVisible:!1,dialogContractVisible:!1,dialogLostVisible:!1,operateLog:[],options:a.regionData,isEdit:!1,opportunityList:[],marketingClueEdit:{},marketingClue:{},marketingClueFieldList:[],marketing_clue_rules:{},dialogAnnexVisible:!1,annexList:[],annexRemarks:"",files:[],dialogTransferVisible:!1,staff:"",allStaff:[],follows:[],dialogFolowVisible:!1,folowForm:{},follow_type_list:[],follow_status_list:[],contact_list:[],followRules:{followType:[{required:!0,message:"请选择跟进方式",trigger:"change"}],followTime:[{type:"date",required:!0,message:"请选择跟进时间",trigger:"change"}],followContent:[{required:!0,message:"请填写跟进内容",trigger:"blur"}],followStatus:[{required:!0,message:"请选择跟进状态",trigger:"change"}],contact:[{validator:function(e,l,a){"到访"==t.follow_form.followType&!l?a(new Error("跟进方式为到访时请填写拜访人")):a()},trigger:"change"}]},follow_form:{moduleName:"CRM-XS-GJZT",followType:"",followTime:"",followContent:"",followStatus:"",contact:"",copyToUser:""}}},activated:function(){this.query=this.$router.currentRoute.query,this.getMarketingClueDetail()},methods:{getMarketingClueDetail:function(){var t=this;this.$post("/crm/marketingClueDetailPR/queryMarketingClueForOne",{moduleName:"CRM-XS-GJZT",id:this.query.id},function(e){t.marketingClue=e.marketingClue,t.follows=e.follows,t.isOwner=e.isOwner,t.marketingClueEdit=t.deepClone(e.marketingClue)}),this.$post("/crm/extFieldPR/getField",{tableName:"crm_marketing_clue"},function(e){t.marketingClueFieldList=e.list})},turnOther:function(){this.getAllStaff(),this.dialogTransferVisible=!0},getAllStaff:function(){var t=this;this.allStaff.length||this.$post("/crm/getAllStaff",{},function(e){t.allStaff=e.list,t.contact_list=e.list})},turn_other_sava:function(){var t=this;if(this.staff){var e={list:[this.marketingClue.id],ownerId:this.staff,ifLeft:this.formTransfer.checkbox1};this.$post("/crm/marketingCluePR/turnOther",e,function(e){t.dialogTransferVisible=!1,t.$message.success("转移成功！"),t.$router.back(-1)})}else this.$message.error("请选择新拥有者！")},edit_marketing_clue:function(){var t=this;this.$post("/crm/extFieldPR/getField",{tableName:"crm_marketing_clue"},function(e){t.marketingClueFieldList=e.list,e.list.map(function(e){"date"!=e.fieldType&&"cascade"==e.fieldType&!e.value&&(t.marketingClue[e.name]=[]),t.marketing_clue_rules[e.name]={required:!0,message:"请输入"+e.label,trigger:"text"==e.fieldType?"blur":"change"}}),t.dialogEditVisible=!0})},marketingClueSave:function(){var t=this;this.$post("/crm/marketingCluePR/updateMarketingClue",this.marketingClueEdit,function(e){t.$message.success("修改成功！"),t.isEdit=!1,t.marketingClue=t.deepClone(t.marketingClueEdit)}),this.dialogEditVisible=!1},cancelEdit:function(){this.getMarketingClueDetail(),this.dialogEditVisible=!1},delMarketingClue:function(){var t=this;this._confirm("确定删除吗?",function(){t.$post("/crm/marketingCluePR/deleteMarketingClue",{list:[t.marketingClue.id]},function(e){t.$message.success("删除成功！"),t.$router.back(-1)})})},getMembers:function(){var t=this;this.dialogSettingsVisible=!0,console.log(this.query),this.$post("/crm/customerMemberPR/getMembers",{customerId:this.query.id},function(e){t.memberList=e.members})},getDict:function(){var t=this;this.follow_type_list.length||this.$post("/crm/getDict",{list:["CRM-GJFS","CRM-XS-GJZT"]},function(e){t.follow_type_list=e["CRM-GJFS"],t.follow_status_list=e["CRM-XS-GJZT"]})},showDate:function(t){if(t>0&&this.formatDate(new Date(this.follows[t-1].followTime))==this.formatDate(new Date(this.follows[t].followTime)))return!1;return!0},openFollowModal:function(){this.follow_form.followTime=new Date,this.getAllStaff(),this.getDict()},closeFollowModal:function(){this.$refs.follow_form.resetFields()},followSave:function(){var t=this;this.$refs.follow_form.validate(function(e){if(e){t.dialogFolowVisible=!1;var l=t.follow_form;l.parentId=t.query.id,l.contact&&(l.contactId=l.contact.split("/")[0],l.contactCname=l.contact.split("/")[1]),l.copyToUser&&(l.copyToUserId=l.copyToUser.split("/")[0],l.copyToUserCname=l.copyToUser.split("/")[1]),t.$post("/crm/followPR/addOne",{follow:l},function(e){t.$message.success("添加成功"),t.follows.unshift(e.follow),t.dialogFolowVisible=!1})}})},getAttachs:function(){var t=this;this.$post("/crm/getAttachs",{parentId:this.marketingClue.id},function(e){t.annexList=e.list})},delAnnex:function(t,e,l){var a=this;this._confirm("确定删除吗?",function(){console.log(t),a.$post("/crm/deleteFile",{ids:[t]},function(t){l.splice(e,1)})})},downLoadAnnex:function(t){console.log("下载")},chooseAnnex:function(){this.$refs.annexInput.click()},changeFile:function(t){for(var e=this.$refs.annexInput.files,l=0;l<e.length;l++)this.files.push(e[l])},delFile:function(t){this.files.splice(t,1)},annexSave:function(){var t=this;if(this.files.length){var e=new FormData;this.files.map(function(t,l){e.append("file"+l,t)}),e.append("remark",this.annexRemarks),e.append("parentId",this.marketingClue.id),this.$post("/crm/upfile2",e,function(e){t.$message.success("上传成功！"),t.dialogAnnexVisible=!1,t.getAttachs()})}else this.$message.error("请选择上传文件！")}}},i={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"wrap"},[l("div",{staticClass:"handle-box"},[l("div",{staticClass:"header-top"},[l("span",{staticClass:"header-name"},[t._v("线索名称："+t._s(t.marketingClue.name))]),t._v(" "),l("span",[t._v("  拥有者："+t._s(t.marketingClue.ownerCname))]),t._v(" "),l("span",[t._v("  参与成员： "),l("i",{staticClass:"iconfont icon-shezhi",on:{click:t.getMembers}})])]),t._v(" "),l("el-row",[l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.dialogContractVisible=!0}}},[t._v("转化为机会")]),t._v(" "),l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.turnOther}},[t._v("转给他人")]),t._v(" "),l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.edit_marketing_clue()}}},[t._v("编辑")]),t._v(" "),l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.delMarketingClue()}}},[t._v("删除")])],1)],1),t._v(" "),l("div",{staticClass:"main"},[l("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[l("el-tab-pane",{attrs:{name:"first"}},[l("span",{staticClass:"tab-item",attrs:{slot:"label"},slot:"label"},[t._v("基本信息")]),t._v(" "),l("div",{staticClass:"first"},[l("div",{staticClass:"first-left"},[l("div",{staticClass:"title"},[t._v("基本信息")]),t._v(" "),l("el-form",{ref:"marketingClueEdit",attrs:{rules:t.marketing_clue_rules,inline:!0,model:t.marketingClueEdit,"label-position":"left","label-width":"120px",size:"small"}},[l("el-form-item",{attrs:{label:"客户名称",prop:"customerName"}},[l("el-input",{attrs:{disabled:!0},model:{value:t.marketingClueEdit.customerName,callback:function(e){t.$set(t.marketingClueEdit,"customerName",e)},expression:"marketingClueEdit.customerName"}})],1),t._v(" "),t._l(t.marketingClueFieldList,function(e,a){return l("el-form-item",{key:a,attrs:{label:e.label,prop:e.name}},["text"==e.editorType?l("el-input",{attrs:{disabled:!t.isEdit||"name"==e.name,prop:e.name},model:{value:t.marketingClueEdit[e.name],callback:function(l){t.$set(t.marketingClueEdit,e.name,l)},expression:"marketingClueEdit[item.name]"}}):t._e(),t._v(" "),"date"==e.editorType?l("el-date-picker",{attrs:{disabled:!t.isEdit,"value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择日期时间"},model:{value:t.marketingClueEdit[e.name],callback:function(l){t.$set(t.marketingClueEdit,e.name,l)},expression:"marketingClueEdit[item.name]"}}):t._e(),t._v(" "),"dict"==e.editorType?l("el-select",{attrs:{disabled:!t.isEdit},model:{value:t.marketingClueEdit[e.name],callback:function(l){t.$set(t.marketingClueEdit,e.name,l)},expression:"marketingClueEdit[item.name]"}},t._l(e.selectList,function(a){return"dict"==e.editorType?l("el-option",{key:a,attrs:{label:a,value:a}}):t._e()})):t._e(),t._v(" "),"cascade"==e.editorType?l("el-cascader",{attrs:{disabled:!t.isEdit,size:"small",options:t.cityData()},model:{value:t.marketingClueEdit[e.name],callback:function(l){t.$set(t.marketingClueEdit,e.name,l)},expression:"marketingClueEdit[item.name]"}}):t._e()],1)})],2)],1),t._v(" "),l("div",{staticClass:"first-right"},[l("div",{staticClass:"title"},[t._v("销售动态\n                            "),l("el-button",{staticStyle:{float:"right","margin-top":"6px"},attrs:{type:"primary",size:"mini"},on:{click:function(e){t.dialogFolowVisible=!0}}},[t._v("写跟进")])],1),t._v(" "),l("div",{staticClass:"process"},[t._l(t.follows,function(e,a){return[l("div",{directives:[{name:"show",rawName:"v-show",value:t.showDate(a),expression:"showDate(index)"}],staticClass:"el-popover el-popper tooltip iconfont date",attrs:{"x-placement":"right-start"}},[l("div",{staticClass:"el-popover__title"},[t._v(t._s(t.formatDate(new Date(e.followTime))))]),t._v(" "),l("div",{staticClass:"popper__arrow",staticStyle:{top:"12.5px","border-right-color":"#0090ff"},attrs:{"x-arrow":""}})]),t._v(" "),l("div",{staticClass:"el-popover el-popper tooltip iconfont",attrs:{"x-placement":"right-start"}},[l("div",{staticClass:"el-popover__title"},[t._v(t._s(e.createUserCname)),l("span",{staticClass:"right"},[t._v(t._s(t.formatDate(new Date(e.followTime),"hh:mm")))])]),t._v(" "),l("div",{staticClass:"follow-content"},[t._v(t._s(e.followContent))]),t._v(" "),l("p",[t._v("跟进方式："+t._s(e.followType))]),t._v(" "),l("p",[t._v("跟进状态："+t._s(e.followStatus))]),t._v(" "),e.contactCname?l("p",[t._v("联系人："+t._s(e.contactCname))]):t._e(),t._v(" "),l("div",{staticClass:"popper__arrow",staticStyle:{top:"12.5px"},attrs:{"x-arrow":""}})])]})],2)])])]),t._v(" "),l("el-tab-pane",{attrs:{name:"second"}},[l("span",{staticClass:"tab-item",attrs:{slot:"label"},slot:"label"},[t._v("机会")]),t._v(" "),l("div",{staticClass:"fifth"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.opportunityList,"max-height":"500",border:"","row-style":{"text-align":"center",color:"#333"},"header-cell-style":{"text-align":"center",background:"#f2f2f2","border-color":"#fff",color:"#333"}}},[l("el-table-column",{attrs:{prop:"date",label:"机会名称",width:"180"}}),t._v(" "),l("el-table-column",{attrs:{prop:"name",label:"预计营销金额",width:"180"}}),t._v(" "),l("el-table-column",{attrs:{prop:"address",label:"营销阶段"}}),t._v(" "),l("el-table-column",{attrs:{prop:"address",label:"赢单率"}}),t._v(" "),l("el-table-column",{attrs:{prop:"address",label:"备注"}}),t._v(" "),l("el-table-column",{attrs:{prop:"address",label:"创建时间"}})],1)],1)]),t._v(" "),l("el-tab-pane",{attrs:{name:"tab6"}},[l("span",{staticClass:"tab-item",attrs:{slot:"label"},on:{click:t.getAttachs},slot:"label"},[t._v("附件")]),t._v(" "),l("div",{staticClass:"sixth"},[l("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogAnnexVisible=!0}}},[t._v("上传附件")]),t._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.annexList,"max-height":"500",border:"","row-style":{"text-align":"center",color:"#333"},"header-cell-style":{"text-align":"center",background:"#f2f2f2","border-color":"#fff",color:"#333"}}},[l("el-table-column",{attrs:{prop:"fileName",label:"附件名称",width:"180"}}),t._v(" "),l("el-table-column",{attrs:{prop:"fileSizeStr",label:"大小",width:"180"}}),t._v(" "),l("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),l("el-table-column",{attrs:{prop:"upUserCname",label:"上传人"}}),t._v(" "),l("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                "+t._s(t.formatDate(new Date(e.row.upTime),"yyyy-MM-dd hh:mm:ss"))+"\n                            ")]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("a",{staticClass:"operating",on:{click:function(l){t.downLoadAnnex(e.row.id)}}},[t._v("下载")]),t._v(" "),l("a",{staticClass:"operating",on:{click:function(l){t.delAnnex(e.row.id,e.$index,t.annexList)}}},[t._v("删除")])]}}])})],1)],1)]),t._v(" "),l("el-tab-pane",{attrs:{name:"fourth"}},[l("span",{staticClass:"tab-item",attrs:{slot:"label"},slot:"label"},[t._v("操作日志")]),t._v(" "),l("div",{staticClass:"seventh"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.operateLog,"max-height":"500",border:"","row-style":{"text-align":"center",color:"#333"},"header-cell-style":{"text-align":"center",background:"#f2f2f2","border-color":"#fff",color:"#333"}}},[l("el-table-column",{attrs:{prop:"date",label:"操作时间",width:"180"}}),t._v(" "),l("el-table-column",{attrs:{prop:"name",label:"操作人",width:"180"}}),t._v(" "),l("el-table-column",{attrs:{prop:"address",label:"操作类型"}}),t._v(" "),l("el-table-column",{attrs:{prop:"address",label:"备注"}})],1)],1)])],1)],1),t._v(" "),l("el-dialog",{staticClass:"dialogAdd",attrs:{title:"添加联系人",width:"600px",visible:t.dialogAddVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogAddVisible=e}}},[l("el-form",{ref:"form",attrs:{model:t.formAdd,"label-width":"120px",size:"small"}},[l("el-form-item",{attrs:{label:"联系人："}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formAdd.origin,callback:function(e){t.$set(t.formAdd,"origin",e)},expression:"formAdd.origin"}},[l("el-option",{attrs:{label:"区域一",value:"shanghai"}}),t._v(" "),l("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),t._v(" "),l("el-form-item",{attrs:{label:"联系人角色："}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formAdd.origin,callback:function(e){t.$set(t.formAdd,"origin",e)},expression:"formAdd.origin"}},[l("el-option",{attrs:{label:"区域一",value:"shanghai"}}),t._v(" "),l("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),t._v(" "),l("el-form-item",{attrs:{label:"是否主联系人："}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formAdd.origin,callback:function(e){t.$set(t.formAdd,"origin",e)},expression:"formAdd.origin"}},[l("el-option",{attrs:{label:"区域一",value:"shanghai"}}),t._v(" "),l("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.dialogAddVisible=!1}}},[t._v("取 消")]),t._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogAddVisible=!1}}},[t._v("确 定")])],1)],1),t._v(" "),l("el-dialog",{staticClass:"dialogContract",attrs:{title:"转化为机会",width:"600px",visible:t.dialogContractVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogContractVisible=e}}},[l("el-form",{ref:"form",attrs:{model:t.formContract,"label-width":"120px",size:"small"}},[l("el-form-item",{attrs:{label:"机会名称："}},[l("el-input",{attrs:{disabled:""},model:{value:t.formContract.name,callback:function(e){t.$set(t.formContract,"name",e)},expression:"formContract.name"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"公司名称："}},[l("el-select",{attrs:{disabled:""},model:{value:t.formContract.origin,callback:function(e){t.$set(t.formContract,"origin",e)},expression:"formContract.origin"}},[l("el-option",{attrs:{label:"区域一",value:"shanghai"}}),t._v(" "),l("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),t._v(" "),l("el-form-item",{attrs:{label:"合同名称："}},[l("el-input",{model:{value:t.formContract.mail,callback:function(e){t.$set(t.formContract,"mail",e)},expression:"formContract.mail"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"营销金额(元)："}},[l("el-input",{model:{value:t.formContract.mail,callback:function(e){t.$set(t.formContract,"mail",e)},expression:"formContract.mail"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"开始日期："}},[l("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.formContract.value1,callback:function(e){t.$set(t.formContract,"value1",e)},expression:"formContract.value1"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"结束日期："}},[l("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.formContract.value1,callback:function(e){t.$set(t.formContract,"value1",e)},expression:"formContract.value1"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"合同负责人："}},[l("el-select",{model:{value:t.formContract.origin,callback:function(e){t.$set(t.formContract,"origin",e)},expression:"formContract.origin"}},[l("el-option",{attrs:{label:"区域一",value:"shanghai"}}),t._v(" "),l("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),t._v(" "),l("el-form-item",{attrs:{label:"所属部门："}},[l("el-select",{attrs:{placeholder:"请选择部门"},model:{value:t.formContract.origin,callback:function(e){t.$set(t.formContract,"origin",e)},expression:"formContract.origin"}},[l("el-option",{attrs:{label:"区域一",value:"shanghai"}}),t._v(" "),l("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),t._v(" "),l("el-form-item",{attrs:{label:"合同状态："}},[l("el-select",{model:{value:t.formContract.origin,callback:function(e){t.$set(t.formContract,"origin",e)},expression:"formContract.origin"}},[l("el-option",{attrs:{label:"区域一",value:"shanghai"}}),t._v(" "),l("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),t._v(" "),l("el-form-item",{attrs:{label:"客户签约人："}},[l("el-input",{model:{value:t.formContract.zipcode,callback:function(e){t.$set(t.formContract,"zipcode",e)},expression:"formContract.zipcode"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"我方签约人："}},[l("el-input",{model:{value:t.formContract.zipcode,callback:function(e){t.$set(t.formContract,"zipcode",e)},expression:"formContract.zipcode"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"签约日期："}},[l("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.formContract.value1,callback:function(e){t.$set(t.formContract,"value1",e)},expression:"formContract.value1"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"备注："}},[l("el-input",{attrs:{type:"textarea",rows:4},model:{value:t.formContract.notes,callback:function(e){t.$set(t.formContract,"notes",e)},expression:"formContract.notes"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"附件："}},[l("el-upload",{attrs:{action:""}},[l("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传文件")]),t._v(" "),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),l("el-form-item",{attrs:{label:"通知他人："}},[l("el-input",{model:{value:t.formContract.notes,callback:function(e){t.$set(t.formContract,"notes",e)},expression:"formContract.notes"}})],1)],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogContractVisible=!1}}},[t._v("仅保存")]),t._v(" "),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogContractVisible=!1}}},[t._v("提交审批")])],1)],1),t._v(" "),l("el-dialog",{staticClass:"dialogEdit",attrs:{title:"编辑线索",width:"600px",visible:t.dialogEditVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogEditVisible=e}}},[l("el-form",{ref:"form",attrs:{model:t.formEdit,"label-width":"120px",size:"small"}},t._l(t.marketingClueFieldList,function(e,a){return l("el-form-item",{key:a,attrs:{label:e.label,prop:e.name}},["text"==e.editorType?l("el-input",{model:{value:t.marketingClueEdit[e.name],callback:function(l){t.$set(t.marketingClueEdit,e.name,l)},expression:"marketingClueEdit[item.name]"}}):t._e(),t._v(" "),"date"==e.editorType?l("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择日期时间"},model:{value:t.marketingClueEdit[e.name],callback:function(l){t.$set(t.marketingClueEdit,e.name,l)},expression:"marketingClueEdit[item.name]"}}):t._e(),t._v(" "),"dict"==e.editorType?l("el-select",{model:{value:t.marketingClueEdit[e.name],callback:function(l){t.$set(t.marketingClueEdit,e.name,l)},expression:"marketingClueEdit[item.name]"}},t._l(e.selectList,function(a){return"dict"==e.editorType?l("el-option",{key:a,attrs:{label:a,value:a}}):t._e()})):t._e(),t._v(" "),"cascade"==e.editorType?l("el-cascader",{attrs:{size:"small",options:t.cityData()},model:{value:t.marketingClueEdit[e.name],callback:function(l){t.$set(t.marketingClueEdit,e.name,l)},expression:"marketingClueEdit[item.name]"}}):t._e()],1)})),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.cancelEdit()}}},[t._v("取 消")]),t._v(" "),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.marketingClueSave()}}},[t._v("保存")])],1)],1),t._v(" "),l("el-dialog",{staticClass:"dialogTransfer",attrs:{title:"转给他人",width:"600px",visible:t.dialogTransferVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogTransferVisible=e}}},[l("el-form",{ref:"form",attrs:{model:t.formTransfer,"label-width":"120px",size:"small"}},[l("el-form-item",{attrs:{label:"转移对象："}},[t._v("\n                线索名称【"+t._s(t.marketingClue.name)+"】\n            ")]),t._v(" "),l("el-form-item",{attrs:{label:"新拥有者："}},[l("el-form-item",[l("el-select",{attrs:{size:"small",filterable:"",clearable:"",placeholder:"请输入员工姓名或工号"},model:{value:t.staff,callback:function(e){t.staff=e},expression:"staff"}},t._l(t.allStaff,function(e){return l("el-option",{key:e.userName,attrs:{label:e.cname+"  "+e.userName,value:e.userName}},[l("span",{staticStyle:{float:"left"}},[t._v(t._s(e.cname))]),t._v(" "),l("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.userName))])])}))],1)],1)],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogTransferVisible=!1}}},[t._v("取消")]),t._v(" "),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.turn_other_sava()}}},[t._v("确定")])],1)],1),t._v(" "),l("el-dialog",{attrs:{title:"跟进",visible:t.dialogFolowVisible,"close-on-click-modal":!1,width:"550px"},on:{"update:visible":function(e){t.dialogFolowVisible=e},open:t.openFollowModal,close:t.closeFollowModal}},[l("el-form",{ref:"follow_form",attrs:{inline:!0,rules:t.followRules,model:t.follow_form,labelPosition:"left"}},[l("el-form-item",{staticStyle:{"margin-right":"76px"},attrs:{required:"",prop:"followType"}},[l("el-select",{attrs:{placeholder:"请选择跟进方式",size:"small"},model:{value:t.follow_form.followType,callback:function(e){t.$set(t.follow_form,"followType",e)},expression:"follow_form.followType"}},t._l(t.follow_type_list,function(t){return l("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),l("el-form-item",{attrs:{prop:"followTime"}},[l("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",size:"small",placeholder:"选择日期时间"},model:{value:t.follow_form.followTime,callback:function(e){t.$set(t.follow_form,"followTime",e)},expression:"follow_form.followTime"}})],1),t._v(" "),l("el-form-item",{attrs:{prop:"followContent"}},[l("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:2},maxlength:"200",placeholder:"填写跟进内容(200字以内)"},model:{value:t.follow_form.followContent,callback:function(e){t.$set(t.follow_form,"followContent",e)},expression:"follow_form.followContent"}})],1),t._v(" "),l("p",{staticStyle:{"padding-bottom":"10px"}},[t._v("客户名称：    "+t._s(t.marketingClue.customerName))]),t._v(" "),l("el-form-item",{attrs:{label:"跟进状态：",prop:"followStatus"}},[l("el-select",{attrs:{placeholder:"",size:"small"},model:{value:t.follow_form.followStatus,callback:function(e){t.$set(t.follow_form,"followStatus",e)},expression:"follow_form.followStatus"}},t._l(t.follow_status_list,function(t){return l("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),l("el-form-item",{attrs:{label:"拜访人员：",prop:"contact"}},[l("el-select",{attrs:{size:"small",filterable:"",clearable:"",placeholder:"请输入员工姓名或工号"},model:{value:t.follow_form.contact,callback:function(e){t.$set(t.follow_form,"contact",e)},expression:"follow_form.contact"}},t._l(t.contact_list,function(e){return l("el-option",{key:e.userName,attrs:{label:e.cname+"  "+e.userName,value:e.userName+"/"+e.cname}},[l("span",{staticStyle:{float:"left"}},[t._v(t._s(e.cname))]),t._v(" "),l("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.userName))])])}))],1),t._v(" "),l("el-form-item",{attrs:{label:"通知：","label-width":"80px",prop:"copyToUser"}},[l("el-select",{attrs:{size:"small",filterable:"",clearable:"",placeholder:"请输入员工姓名或工号"},model:{value:t.follow_form.copyToUser,callback:function(e){t.$set(t.follow_form,"copyToUser",e)},expression:"follow_form.copyToUser"}},t._l(t.allStaff,function(e){return l("el-option",{key:e.userName,attrs:{label:e.cname+"  "+e.userName,value:e.userName+"/"+e.cname}},[l("span",{staticStyle:{float:"left"}},[t._v(t._s(e.cname))]),t._v(" "),l("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.userName))])])}))],1)],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.dialogFolowVisible=!1}}},[t._v("取 消")]),t._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:t.followSave}},[t._v("确 定")])],1)],1),t._v(" "),l("el-dialog",{staticClass:"dialogContract",attrs:{title:"丢单",width:"600px",visible:t.dialogLostVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogLostVisible=e}}},[l("p",{staticStyle:{margin:"20px 40px"}},[t._v("是否将【xxx】的销售阶段调整为丢单？")]),t._v(" "),l("el-form",{ref:"form",attrs:{model:t.formLost,"label-width":"120px",size:"small"}},[l("el-form-item",{attrs:{label:"丢单理由："}},[l("el-select",{model:{value:t.formLost.origin,callback:function(e){t.$set(t.formLost,"origin",e)},expression:"formLost.origin"}},[l("el-option",{attrs:{label:"区域一",value:"shanghai"}}),t._v(" "),l("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),t._v(" "),l("el-form-item",{attrs:{label:"备注："}},[l("el-input",{attrs:{type:"textarea",rows:4},model:{value:t.formLost.notes,callback:function(e){t.$set(t.formLost,"notes",e)},expression:"formLost.notes"}})],1)],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogLostVisible=!1}}},[t._v("取消")]),t._v(" "),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogLostVisible=!1}}},[t._v("确定")])],1)],1),t._v(" "),l("el-dialog",{attrs:{title:"上传附件",visible:t.dialogAnnexVisible,"close-on-click-modal":!1,width:"550px"},on:{"update:visible":function(e){t.dialogAnnexVisible=e}}},[l("el-form",{attrs:{labelPosition:"left","label-width":"60px"}},[l("el-form-item",{attrs:{label:"附件："}},[l("div",[l("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.chooseAnnex}},[t._v("选择文件")]),l("span",{staticStyle:{color:"#409EFF","margin-left":"10px"}},[t._v("单个文件最大支持100MB，上传请耐心等待")]),t._v(" "),t._l(t.files,function(e,a){return l("p",{key:a,staticStyle:{"line-height":"24px"}},[t._v(t._s(e.name)+"\n                        "),l("a",{staticStyle:{float:"right",color:"#409EFF"},on:{click:function(e){t.delFile(a)}}},[t._v("删除")])])})],2),t._v(" "),l("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"annexInput",attrs:{type:"file",multiple:""},on:{change:t.changeFile}})]),t._v(" "),l("el-form-item",{attrs:{label:"备注："}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:2},maxlength:"200",placeholder:"请填写备注(200字以内)"},model:{value:t.annexRemarks,callback:function(e){t.annexRemarks=e},expression:"annexRemarks"}})],1)],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.dialogAnnexVisible=!1}}},[t._v("取 消")]),t._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:t.annexSave}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var s=l("VU/8")(o,i,!1,function(t){l("TFZR")},null,null);e.default=s.exports}});
//# sourceMappingURL=29.1ae7aa83308e7b12dc4c.js.map