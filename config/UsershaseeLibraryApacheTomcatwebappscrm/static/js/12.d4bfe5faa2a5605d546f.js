webpackJsonp([12],{"9R3s":function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});t("NYxO");var a={render:function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("div",{staticClass:"wrap"},[t("el-form",{staticClass:"query-form",attrs:{"label-position":"left",size:"small",inline:!0,"label-width":"70px"}},[t("el-form-item",{attrs:{label:"表名"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.tableName,callback:function(l){e.tableName=l},expression:"tableName"}},e._l(e.tableList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.getTableField}},[e._v("查询")])],1)],1),e._v(" "),t("el-row",[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(l){e.addCrmField()}}},[e._v("新增")]),e._v(" "),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(l){e.updateCrmField()}}},[e._v("修改")]),e._v(" "),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(l){e.deleteCrmField()}}},[e._v("删除")])],1),e._v(" "),t("br"),e._v(" "),t("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),border:"","default-sort":{prop:"sortNum",order:"descending"},"row-key":"id"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55"}}),e._v(" "),e._e(),e._v(" "),t("el-table-column",{attrs:{prop:"fieldNo",label:"字段名称",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"fieldName",label:"中文显示"}}),e._v(" "),t("el-table-column",{attrs:{prop:"isShow",label:"是否显示"}}),e._v(" "),t("el-table-column",{attrs:{prop:"fieldType",label:"字段类型"}}),e._v(" "),t("el-table-column",{attrs:{prop:"cosSpan",label:"占格数"}}),e._v(" "),t("el-table-column",{attrs:{prop:"sortNum",label:"排序"}})],1),e._v(" "),t("br"),e._v(" "),t("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next","page-size":e.pagesize,"current-page":e.currentPage,total:e.tableData.length},on:{"current-change":e.handleCurrentChange}}),e._v(" "),t("el-dialog",{attrs:{title:"",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(l){e.dialogVisible=l},close:function(l){e.dlgClose("crmCustomerFieldAdd")}}},[t("el-form",{ref:"crmCustomerFieldAdd",attrs:{model:e.crmCustomerFieldAdd,rules:e.field_rules,"label-position":"left","label-width":"120px",size:"small"}},[t("el-form-item",{attrs:{label:"中文显示:",prop:"fieldName"}},[t("el-input",{model:{value:e.crmCustomerFieldAdd.fieldName,callback:function(l){e.$set(e.crmCustomerFieldAdd,"fieldName",l)},expression:"crmCustomerFieldAdd.fieldName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否显示:",prop:"isShow"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.crmCustomerFieldAdd.isShow,callback:function(l){e.$set(e.crmCustomerFieldAdd,"isShow",l)},expression:"crmCustomerFieldAdd.isShow"}},e._l(e.true_or_false,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"字段类型:",prop:"fieldType"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.crmCustomerFieldAdd.fieldType,callback:function(l){e.$set(e.crmCustomerFieldAdd,"fieldType",l)},expression:"crmCustomerFieldAdd.fieldType"}},e._l(e.field_type,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"字典名:",prop:"dictName"}},[t("el-input",{model:{value:e.crmCustomerFieldAdd.dictName,callback:function(l){e.$set(e.crmCustomerFieldAdd,"dictName",l)},expression:"crmCustomerFieldAdd.dictName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"占格数:",prop:"cosSpan"}},[t("el-input",{model:{value:e.crmCustomerFieldAdd.cosSpan,callback:function(l){e.$set(e.crmCustomerFieldAdd,"cosSpan",l)},expression:"crmCustomerFieldAdd.cosSpan"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"主键:",prop:"id"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.crmCustomerFieldAdd.id,callback:function(l){e.$set(e.crmCustomerFieldAdd,"id",l)},expression:"crmCustomerFieldAdd.id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"排序:",prop:"sortNum"}},[t("el-input",{model:{value:e.crmCustomerFieldAdd.sortNum,callback:function(l){e.$set(e.crmCustomerFieldAdd,"sortNum",l)},expression:"crmCustomerFieldAdd.sortNum"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(l){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(l){e.crmCustomerFieldSave("crmCustomerFieldAdd")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=t("VU/8")({data:function(){return{tableName:"crm_customer",tableList:[{value:"crm_customer",label:"客户"},{value:"crm_contacts",label:"联系人"},{value:"crm_marketing_clue",label:"营销线索"},{value:"crm_competitor",label:"竞争对手"},{value:"crm_marketing_opportunity",label:"营销机会"},{value:"crm_partner",label:"合作伙伴"}],currentPage:1,pagesize:50,tableData:[],dialogVisible:!1,savaflag:"",crmCustomerFieldAdd:{id:"",fieldNo:"",fieldName:"",isShow:"",fieldType:"",dictName:"",cosSpan:"1",sortNum:""},selectValue:[],true_or_false:[{value:"true",label:"是"},{value:"false",label:"否"}],field_type:[{value:"text",label:"文本"},{value:"date",label:"时间"},{value:"dict",label:"字典"}],field_rules:{fieldNo:[{required:!0,message:"请输入中文显示",trigger:"blur"}],fieldName:[{required:!0,message:"请输入中文显示",trigger:"blur"}],isShow:[{required:!0,message:"请选择是否显示",trigger:"blur"}],fieldType:[{required:!0,message:"请选择字段类型",trigger:"blur"}],sortNum:[{required:!0,message:"请输入排序",trigger:"blur"}]}}},mounted:function(){this.getTableField()},methods:{getTableField:function(){var e=this;this.$post("/crm/extFieldPR/queryAll",{tableName:this.tableName},function(l){e.tableData=l.list})},dlgClose:function(e){this.crmCustomerFieldAdd={id:"",fieldNo:"",fieldName:"",isShow:"",fieldType:"",dictName:"",cosSpan:"1",sortNum:""}},handleCurrentChange:function(e){this.currentPage=e},addCrmField:function(){this.savaflag="add",this.dialogVisible=!0,this.crmCustomerFieldAdd.sortNum=this.tableData.length+1},updateCrmField:function(){1==this.selectValue.length?(this.crmCustomerFieldAdd=this.selectValue[0],this.savaflag="edit",this.dialogVisible=!0):this.$message.error("请勾选一条数据！")},deleteCrmField:function(){var e=this;if(this.selectValue.length<1)this.$message.error("请勾选数据！");else{var l=[];this.selectValue.map(function(e){l.push(e.id)}),this.$post("/crm/extFieldPR/delete",{list:l},function(l){e.$refs.table.clearSelection(),e.getTableField(),e.$message.success("操作成功！")})}},crmCustomerFieldSave:function(e){var l=this;this.$refs[e].validate(function(e){if(e){var t="";"add"==l.savaflag&&(t="/crm/extFieldPR/addOne"),"edit"==l.savaflag&&(t="/crm/extFieldPR/modifyOne"),l.crmCustomerFieldAdd.tableName=l.tableName,l.$post(t,l.crmCustomerFieldAdd,function(e){l.$message.success("操作成功！"),l.$refs.table.clearSelection(),l.getTableField(),l.dialogVisible=!1})}})},handleSelectionChange:function(e){this.selectValue=e}}},a,!1,function(e){t("WDiN")},"data-v-b85a2e00",null);l.default=r.exports},WDiN:function(e,l){}});
//# sourceMappingURL=12.d4bfe5faa2a5605d546f.js.map