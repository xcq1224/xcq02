{"version":3,"sources":["webpack:///src/page/competitor_detail.vue","webpack:///./src/page/competitor_detail.vue?9fa9","webpack:///./src/page/competitor_detail.vue"],"names":["query","getBaseInfo","_this","this","basicInfo","list","resetFields","_this2","_this3","_this4","_this5","files","click","i","_this6","FormData","item","annexRemarks","id","getAttachs","page_competitor_detail","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","name","attrs","type","size","nativeOn","$event","goBack","on","edit","del","staticStyle","height","background","model","value","callback","$$v","activeName","expression","slot","directives","rawName","margin-bottom","editSave","cancelEdit","ref","inline","label-position","label-width","_l","index","key","label","prop","editorType","resize","autosize","disabled","isEdit","$set","_e","value-format","format","placeholder","options","cityData","width","data","tableData","max-height","border","row-style","text-align","color","header-cell-style","border-color","dialogAnnexVisible","annexList","scopedSlots","_u","fn","scope","formatDate","Date","row","upTime","downLoadAnnex","delAnnex","$index","title","visible","close-on-click-modal","update:visible","close","closeAnnexModal","labelPosition","chooseAnnex","margin-left","line-height","float","delFile","multiple","change","changeFile","minRows","maxlength","annexSave","staticRenderFns","Component","__webpack_require__","normalizeComponent","competitor_detail","ssrContext","__webpack_exports__"],"mappings":"4RA+JA,oGAOAA,WACAC,+CAIA,IAAAC,EAAAC,6GAEAC,8HAIAC,wCAOA,qBACA,sCAIA,kBACAC,mCAGA,IAAAC,EAAAJ,4FAEA,mBACA,oBAIA,IAAAK,EAAAL,iIAGA,yBACA,8BAMA,IAAAM,EAAAN,yFAEAE,+BAIA,IAAAK,EAAAP,0GAGA,6BACA,8CAMA,oDAIA,GAAAA,KAAAQ,uDAKAC,gEAIAD,2CAEAE,gCAEA,4CAIA,yBAGA,IAAAC,EAAAX,qCAKAY,wDAEAC,4BAEAC,iDACAC,+DAEA,+BACA,IACAC,wCAZA,eCzPAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAnB,KAAaoB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,SAAmBF,EAAA,OAAYE,YAAA,eAAyBF,EAAA,OAAYE,YAAA,eAAyBF,EAAA,QAAaE,YAAA,gBAA0BL,EAAAM,GAAAN,EAAAO,GAAAP,EAAAlB,UAAA0B,WAAAR,EAAAM,GAAA,KAAAH,EAAA,UAAAA,EAAA,aAAkFM,OAAOC,KAAA,UAAAC,KAAA,QAA+BC,UAAWtB,MAAA,SAAAuB,GAAyB,OAAAb,EAAAc,OAAAD,OAA4Bb,EAAAM,GAAA,QAAAN,EAAAM,GAAA,KAAAH,EAAA,aAA6CM,OAAOC,KAAA,UAAAC,KAAA,QAA+BI,IAAKzB,MAAAU,EAAAgB,QAAkBhB,EAAAM,GAAA,QAAAN,EAAAM,GAAA,KAAAH,EAAA,aAA6CM,OAAOC,KAAA,UAAAC,KAAA,QAA+BI,IAAKzB,MAAAU,EAAAiB,OAAiBjB,EAAAM,GAAA,gBAAAN,EAAAM,GAAA,KAAAH,EAAA,OAA+Ce,aAAaC,OAAA,OAAAC,WAAA,aAAwCpB,EAAAM,GAAA,KAAAH,EAAA,OAAwBE,YAAA,SAAmBF,EAAA,WAAgBkB,OAAOC,MAAAtB,EAAA,WAAAuB,SAAA,SAAAC,GAAgDxB,EAAAyB,WAAAD,GAAmBE,WAAA,gBAA0BvB,EAAA,eAAoBM,OAAOD,KAAA,WAAgBL,EAAA,QAAaE,YAAA,WAAAI,OAA8BkB,KAAA,SAAeA,KAAA,UAAc3B,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAyCE,YAAA,UAAoBF,EAAA,KAAUyB,aAAapB,KAAA,OAAAqB,QAAA,SAAAP,MAAAtB,EAAA,OAAA0B,WAAA,WAAoER,aAAeY,gBAAA,UAAwB3B,EAAA,aAAkBM,OAAOC,KAAA,UAAAC,KAAA,QAA+BI,IAAKzB,MAAAU,EAAA+B,YAAsB/B,EAAAM,GAAA,QAAAN,EAAAM,GAAA,KAAAH,EAAA,aAA6CM,OAAOC,KAAA,OAAAC,KAAA,QAA4BI,IAAKzB,MAAAU,EAAAgC,cAAwBhC,EAAAM,GAAA,YAAAN,EAAAM,GAAA,KAAAH,EAAA,WAA+C8B,IAAA,OAAA5B,YAAA,OAAAI,OAAqCyB,QAAA,EAAAb,MAAArB,EAAAlB,UAAAqD,iBAAA,OAAAC,cAAA,QAAAzB,KAAA,UAAkGX,EAAAqC,GAAArC,EAAA,kBAAAN,EAAA4C,GAA4C,OAAAnC,EAAA,gBAA0BoC,IAAAD,EAAA7B,OAAiB+B,MAAA9C,EAAA8C,MAAAC,KAAA/C,EAAAc,QAAqC,QAAAd,EAAAgD,WAAAvC,EAAA,YAA6CM,OAAOC,KAAA,WAAAiC,OAAA,OAAAC,SAAA,GAAAC,UAAA7C,EAAA8C,QAAA,QAAApD,EAAAc,KAAAiC,KAAA/C,EAAAc,MAA+Ga,OAAQC,MAAAtB,EAAAlB,UAAAY,EAAAc,MAAAe,SAAA,SAAAC,GAA0DxB,EAAA+C,KAAA/C,EAAAlB,UAAAY,EAAAc,KAAAgB,IAAwCE,WAAA,0BAAoC1B,EAAAgD,KAAAhD,EAAAM,GAAA,aAAAZ,EAAAgD,WAAAvC,EAAA,kBAAwEM,OAAOoC,UAAA7C,EAAA8C,OAAAG,eAAA,mBAAAC,OAAA,mBAAAxC,KAAA,WAAAyC,YAAA,UAA8H9B,OAAQC,MAAAtB,EAAAlB,UAAAY,EAAAc,MAAAe,SAAA,SAAAC,GAA0DxB,EAAA+C,KAAA/C,EAAAlB,UAAAY,EAAAc,KAAAgB,IAAwCE,WAAA,0BAAoC1B,EAAAgD,KAAAhD,EAAAM,GAAA,aAAAZ,EAAAgD,WAAAvC,EAAA,aAAmEM,OAAOoC,UAAA7C,EAAA8C,QAAuBzB,OAAQC,MAAAtB,EAAAlB,UAAAY,EAAAc,MAAAe,SAAA,SAAAC,GAA0DxB,EAAA+C,KAAA/C,EAAAlB,UAAAY,EAAAc,KAAAgB,IAAwCE,WAAA,yBAAoC1B,EAAAqC,GAAA3C,EAAA,oBAAA4B,GAA0C,cAAA5B,EAAAgD,WAAAvC,EAAA,aAAmDoC,IAAAjB,EAAAb,OAAiB+B,MAAAlB,aAA6BtB,EAAAgD,QAAWhD,EAAAgD,KAAAhD,EAAAM,GAAA,gBAAAZ,EAAAgD,WAAAvC,EAAA,eAAyEM,OAAOoC,UAAA7C,EAAA8C,OAAAnC,KAAA,QAAAyC,QAAApD,EAAAqD,YAA+DhC,OAAQC,MAAAtB,EAAAlB,UAAAY,EAAAc,MAAAe,SAAA,SAAAC,GAA0DxB,EAAA+C,KAAA/C,EAAAlB,UAAAY,EAAAc,KAAAgB,IAAwCE,WAAA,0BAAoC1B,EAAAgD,MAAA,OAAe,KAAAhD,EAAAM,GAAA,KAAAH,EAAA,eAAuCM,OAAOD,KAAA,YAAiBL,EAAA,QAAaE,YAAA,WAAAI,OAA8BkB,KAAA,SAAeA,KAAA,UAAc3B,EAAAM,GAAA,QAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAuCE,YAAA,WAAqBF,EAAA,YAAiBe,aAAaoC,MAAA,QAAe7C,OAAQ8C,KAAAvD,EAAAwD,UAAAC,aAAA,MAAAC,OAAA,GAAAC,aAAiEC,aAAA,SAAAC,MAAA,QAAwCC,qBAAsBF,aAAA,SAAAxC,WAAA,UAAA2C,eAAA,OAAAF,MAAA,WAA2F1D,EAAA,mBAAwBM,OAAOgC,KAAA,OAAAD,MAAA,UAA8BxC,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOgC,KAAA,OAAAD,MAAA,YAAgCxC,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOgC,KAAA,UAAAD,MAAA,UAAiCxC,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOgC,KAAA,UAAAD,MAAA,SAAgCxC,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOgC,KAAA,UAAAD,MAAA,QAA+BxC,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOgC,KAAA,UAAAD,MAAA,WAAiC,SAAAxC,EAAAM,GAAA,KAAAH,EAAA,eAA0CM,OAAOD,KAAA,WAAgBL,EAAA,QAAaE,YAAA,WAAAI,OAA8BkB,KAAA,SAAeZ,IAAKzB,MAAAU,EAAAH,YAAuB8B,KAAA,UAAc3B,EAAAM,GAAA,QAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAuCE,YAAA,UAAoBF,EAAA,aAAkBe,aAAaY,gBAAA,QAAuBrB,OAAQC,KAAA,UAAAC,KAAA,SAAgCI,IAAKzB,MAAA,SAAAuB,GAAyBb,EAAAgE,oBAAA,MAAgChE,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,YAA8Ce,aAAaoC,MAAA,QAAe7C,OAAQ8C,KAAAvD,EAAAiE,UAAAR,aAAA,MAAAC,OAAA,GAAAC,aAAiEC,aAAA,SAAAC,MAAA,QAAwCC,qBAAsBF,aAAA,SAAAxC,WAAA,UAAA2C,eAAA,OAAAF,MAAA,WAA2F1D,EAAA,mBAAwBM,OAAOgC,KAAA,WAAAD,MAAA,OAAAc,MAAA,SAAgDtD,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOgC,KAAA,cAAAD,MAAA,KAAAc,MAAA,SAAiDtD,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOgC,KAAA,SAAAD,MAAA,QAA8BxC,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOgC,KAAA,cAAAD,MAAA,SAAoCxC,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAO+B,MAAA,QAAe0B,YAAAlE,EAAAmE,KAAsB5B,IAAA,UAAA6B,GAAA,SAAAC,GAAiC,OAAArE,EAAAM,GAAA,qCAAAN,EAAAO,GAAAP,EAAAsE,WAAA,IAAAC,KAAAF,EAAAG,IAAAC,QAAA,iEAAqKzE,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAO+B,MAAA,MAAa0B,YAAAlE,EAAAmE,KAAsB5B,IAAA,UAAA6B,GAAA,SAAAC,GAAiC,OAAAlE,EAAA,KAAgBE,YAAA,YAAAU,IAA4BzB,MAAA,SAAAuB,GAAyBb,EAAA0E,cAAAL,EAAAG,IAAA5E,QAAkCI,EAAAM,GAAA,QAAAN,EAAAM,GAAA,KAAAH,EAAA,KAAqCE,YAAA,YAAAU,IAA4BzB,MAAA,SAAAuB,GAAyBb,EAAA2E,SAAAN,EAAAG,IAAA5E,GAAAyE,EAAAO,YAA2C5E,EAAAM,GAAA,gBAAsB,SAAAN,EAAAM,GAAA,KAAAH,EAAA,eAA0CM,OAAOD,KAAA,YAAiBL,EAAA,QAAaE,YAAA,WAAAI,OAA8BkB,KAAA,SAAeA,KAAA,UAAc3B,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAyCE,YAAA,WAAqBF,EAAA,YAAiBe,aAAaoC,MAAA,QAAe7C,OAAQ8C,KAAAvD,EAAAwD,UAAAC,aAAA,MAAAC,OAAA,GAAAC,aAAiEC,aAAA,SAAAC,MAAA,QAAwCC,qBAAsBF,aAAA,SAAAxC,WAAA,UAAA2C,eAAA,OAAAF,MAAA,WAA2F1D,EAAA,mBAAwBM,OAAOgC,KAAA,OAAAD,MAAA,UAA8BxC,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOgC,KAAA,OAAAD,MAAA,SAA6BxC,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOgC,KAAA,UAAAD,MAAA,UAAiCxC,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOgC,KAAA,UAAAD,MAAA,SAA+B,iBAAAxC,EAAAM,GAAA,KAAAH,EAAA,aAAgDM,OAAOoE,MAAA,OAAAC,QAAA9E,EAAAgE,mBAAAe,wBAAA,EAAAzB,MAAA,SAA6FvC,IAAKiE,iBAAA,SAAAnE,GAAkCb,EAAAgE,mBAAAnD,GAA8BoE,MAAAjF,EAAAkF,mBAA8B/E,EAAA,WAAgBM,OAAO0E,cAAA,OAAA/C,cAAA,UAA6CjC,EAAA,gBAAqBM,OAAO+B,MAAA,SAAerC,EAAA,OAAAA,EAAA,aAA4BM,OAAOE,KAAA,QAAAD,KAAA,WAAgCK,IAAKzB,MAAAU,EAAAoF,eAAyBpF,EAAAM,GAAA,UAAAH,EAAA,QAA8Be,aAAa2C,MAAA,UAAAwB,cAAA,UAAwCrF,EAAAM,GAAA,2BAAAN,EAAAM,GAAA,KAAAN,EAAAqC,GAAArC,EAAA,eAAAN,EAAA4C,GAAwF,OAAAnC,EAAA,KAAeoC,IAAAD,EAAApB,aAAuBoE,cAAA,UAAsBtF,EAAAM,GAAAN,EAAAO,GAAAb,EAAAc,MAAA,8BAAAL,EAAA,KAAiEe,aAAaqE,MAAA,QAAA1B,MAAA,WAAkC9C,IAAKzB,MAAA,SAAAuB,GAAyBb,EAAAwF,QAAAlD,OAAqBtC,EAAAM,GAAA,aAAmB,GAAAN,EAAAM,GAAA,KAAAH,EAAA,SAA8ByB,aAAapB,KAAA,OAAAqB,QAAA,SAAAP,OAAA,EAAAI,WAAA,UAA8DO,IAAA,aAAAxB,OAA0BC,KAAA,OAAA+E,SAAA,IAA4B1E,IAAK2E,OAAA1F,EAAA2F,gBAAyB3F,EAAAM,GAAA,KAAAH,EAAA,gBAAmCM,OAAO+B,MAAA,SAAerC,EAAA,YAAiBM,OAAOC,KAAA,WAAAiC,OAAA,OAAAC,UAA8CgD,QAAA,GAAYC,UAAA,MAAA1C,YAAA,iBAAiD9B,OAAQC,MAAAtB,EAAA,aAAAuB,SAAA,SAAAC,GAAkDxB,EAAAL,aAAA6B,GAAqBE,WAAA,mBAA4B,OAAA1B,EAAAM,GAAA,KAAAH,EAAA,OAAgCE,YAAA,gBAAAI,OAAmCkB,KAAA,UAAgBA,KAAA,WAAexB,EAAA,aAAkBY,IAAIzB,MAAA,SAAAuB,GAAyBb,EAAAgE,oBAAA,MAAiChE,EAAAM,GAAA,SAAAN,EAAAM,GAAA,KAAAH,EAAA,aAA8CM,OAAOC,KAAA,WAAiBK,IAAKzB,MAAAU,EAAA8F,aAAuB9F,EAAAM,GAAA,qBAEnxPyF,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAC,EACArG,GATA,EAVA,SAAAsG,GACAH,EAAA,SAaA,kBAEA,MAUAI,EAAA,QAAAL,EAAA","file":"static/js/28.c0abdf83b372bb129e95.js","sourcesContent":["<template>\n    <div class=\"wrap\">\n        <!-- 头部 -->\n        <div class=\"handle-box\">\n            <div class=\"header-top\">\n                <span class=\"header-name\">{{basicInfo.name}}</span>\n            </div>\n            <el-row>\n                <el-button type=\"primary\" size=\"mini\" @click.native='goBack'>返回</el-button>\n                <el-button type=\"primary\" size=\"mini\" @click='edit'>编辑</el-button>\n                <el-button type=\"primary\" size=\"mini\" @click='del'>删除</el-button>\n            </el-row>\n        </div>\n        <div style=\"height: 20px; background: #fafafa;\"></div>\n        <!-- 标签页内容 -->\n        <div class=\"main\">\n            <el-tabs v-model=\"activeName\">\n                <!-- 基本信息 -->\n                <el-tab-pane name=\"first\">\n                    <span class=\"tab-item\" slot=\"label\">基本信息</span>\n                    <div class=\"first\">\n                        <p style=\"margin-bottom: 20px;\" v-show=\"isEdit\">\n                            <el-button type=\"primary\" size=\"mini\" @click=\"editSave\">保存</el-button>\n                            <el-button type=\"info\" size=\"mini\" @click=\"cancelEdit\">取消</el-button>\n                        </p>\n                        <el-form ref=\"form\" class=\"form\" :inline=\"true\" :model=\"basicInfo\" label-position=\"left\" label-width=\"120px\" size=\"small\">\n                            <el-form-item v-for=\"(item,index) in addLabel\" :key=\"index\" :label=\"item.label\" :prop=\"item.name\">\n                                <el-input type=\"textarea\" resize=\"none\" autosize :disabled=\"!isEdit || item.name == 'name'\" v-if=\"item.editorType == 'text'\" :prop=\"item.name\" v-model=\"basicInfo[item.name]\"></el-input>\n                                <el-date-picker :disabled=\"!isEdit\" v-if=\"item.editorType == 'date'\" v-model=\"basicInfo[item.name]\" value-format=\"yyyy-MM-dd HH:mm\" format=\"yyyy-MM-dd HH:mm\"\n                                    type=\"datetime\" placeholder=\"选择日期时间\">\n                                </el-date-picker>\n                                <el-select :disabled=\"!isEdit\" v-if=\"item.editorType == 'dict'\" v-model=\"basicInfo[item.name]\">\n                                    <el-option\n                                    v-if=\"item.editorType == 'dict'\"\n                                    v-for=\"value in item.selectList\"\n                                    :key=\"value\"\n                                    :label=\"value\"\n                                    :value=\"value\">\n                                    </el-option>\n                                </el-select>\n                                <el-cascader\n                                    :disabled=\"!isEdit\"\n                                    v-if=\"item.editorType == 'cascade'\"\n                                    size=\"small\"\n                                    :options=\"cityData()\"\n                                    v-model=\"basicInfo[item.name]\">\n                                </el-cascader>\n                            </el-form-item>\n                        </el-form>\n                    </div>\n                </el-tab-pane>\n                <!-- 机会 -->\n                <el-tab-pane name=\"second\">\n                    <span class=\"tab-item\" slot=\"label\">机会</span>\n                    <div class=\"second\">\n                        <el-table\n                            :data=\"tableData\"\n                            max-height=\"500\"\n                            border\n                            :row-style=\"{'text-align': 'center', 'color': '#333'}\"\n                            :header-cell-style=\"{'text-align': 'center', 'background': '#f2f2f2', 'border-color': '#fff', 'color': '#333'}\"\n                            style=\"width: 100%\">\n                            <el-table-column prop=\"date\" label=\"机会名称\"></el-table-column>\n                            <el-table-column prop=\"name\"  label=\"预计营销金额\"></el-table-column>\n                            <el-table-column prop=\"address\" label=\"营销阶段\"></el-table-column>\n                            <el-table-column prop=\"address\" label=\"赢单率\"></el-table-column>\n                            <el-table-column prop=\"address\" label=\"备注\"></el-table-column>\n                            <el-table-column prop=\"address\" label=\"创建时间\"></el-table-column>\n                        </el-table>\n                    </div>\n                </el-tab-pane>\n                <!-- 附件 -->\n                <el-tab-pane name=\"third\">\n                    <span class=\"tab-item\" slot=\"label\" @click=\"getAttachs\">附件</span>\n                    <div class=\"third\">\n                        <el-button type=\"primary\" size=\"small\" style=\"margin-bottom: 10px;\" @click=\"dialogAnnexVisible = true\">上传附件</el-button>\n                        <el-table\n                            :data=\"annexList\"\n                            max-height=\"500\"\n                            border\n                            :row-style=\"{'text-align': 'center', 'color': '#333'}\"\n                            :header-cell-style=\"{'text-align': 'center', 'background': '#f2f2f2', 'border-color': '#fff', 'color': '#333'}\"\n                            style=\"width: 100%\">\n                            <el-table-column prop=\"fileName\" label=\"附件名称\" width=\"180\"></el-table-column>\n                            <el-table-column prop=\"fileSizeStr\"  label=\"大小\" width=\"180\"></el-table-column>\n                            <el-table-column prop=\"remark\" label=\"备注\"></el-table-column>\n                            <el-table-column prop=\"upUserCname\" label=\"上传人\"></el-table-column>\n                            <el-table-column label=\"创建时间\">\n                                <template slot-scope=\"scope\">\n                                    {{formatDate(new Date(scope.row.upTime), 'yyyy-MM-dd hh:mm:ss')}}\n                                </template>\n                            </el-table-column>\n                            <el-table-column label=\"操作\">\n                                <template slot-scope=\"scope\">\n                                    <a class=\"operating\" @click=\"downLoadAnnex(scope.row.id)\">下载</a>\n                                    <a class=\"operating\" @click=\"delAnnex(scope.row.id, scope.$index)\">删除</a>\n                                </template>\n                            </el-table-column>\n                        </el-table>\n                    </div>\n                </el-tab-pane>\n                <!-- 操作日志 -->\n                <el-tab-pane name=\"fourth\">\n                    <span class=\"tab-item\" slot=\"label\">操作日志</span>\n                    <div class=\"fourth\">\n                        <el-table\n                            :data=\"tableData\"\n                            max-height=\"500\"\n                            border\n                            :row-style=\"{'text-align': 'center', 'color': '#333'}\"\n                            :header-cell-style=\"{'text-align': 'center', 'background': '#f2f2f2', 'border-color': '#fff', 'color': '#333'}\"\n                            style=\"width: 100%\">\n                            <el-table-column prop=\"date\" label=\"操作时间\"></el-table-column>\n                            <el-table-column prop=\"name\" label=\"操作人\"></el-table-column>\n                            <el-table-column prop=\"address\" label=\"操作类型\"></el-table-column>\n                            <el-table-column prop=\"address\" label=\"备注\"></el-table-column>\n                        </el-table>\n                    </div>\n                </el-tab-pane>\n            </el-tabs>\n        </div>\n        <!-- 上传附件 -->\n        <el-dialog title=\"上传附件\" :visible.sync=\"dialogAnnexVisible\" @close=\"closeAnnexModal\" :close-on-click-modal='false' width=\"550px\">\n            <el-form labelPosition=\"left\" label-width=\"60px\">\n                <el-form-item label=\"附件：\">\n                    <div>\n                        <el-button size=\"small\" type=\"primary\" @click=\"chooseAnnex\">选择文件</el-button><span style=\"color: #409EFF;margin-left: 10px;\">单个文件最大支持100MB，上传请耐心等待</span>\n                        <p style=\"line-height: 24px\" v-for=\"(item, index) in files\" :key=\"index\">{{item.name}}\n                            <a style=\"float: right; color: #409EFF;\" @click=\"delFile(index)\">删除</a>\n                        </p>\n                    </div>\n                    <input ref=\"annexInput\" @change=\"changeFile\" type=\"file\" multiple v-show=\"false\"> \n                </el-form-item>\n                <el-form-item label=\"备注：\">\n                    <el-input type=\"textarea\" resize=\"none\" :autosize=\"{ minRows: 2}\" maxlength=\"200\" v-model=\"annexRemarks\" placeholder=\"请填写备注(200字以内)\"></el-input>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogAnnexVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"annexSave\">保存</el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n    import {regionData, provinceAndCityDataPlus, regionDataPlus, CodeToText, TextToCode } from 'element-china-area-data'\n    export default {\n        data() {\n            return {\n                query: {},                      //  页面传递参数\n                activeName: 'first',            //  tab页签\n                basicInfo: {},              //  基本信息\n                addLabel: [],               //  信息字段集合\n                isEdit: false,                  //  是否编辑\n                tableData: [],                  //  表格\n                options: regionData,            //  地区\n/**---------------------------------------附件-------------------------------------------- */\n                dialogAnnexVisible: false,  \n                annexList: [],    //  附件列表\n                files: [], // 上传文件列表\n                annexRemarks: '',       //  备注\n            }\n        },\n        activated(){\n            this.query = this.$router.currentRoute.query\n            this.getBaseInfo()\n        },\n        methods: {\n            //  获取竞争对手信息和所有字段\n            getBaseInfo(){\n                this.$post(\"/crm/competitorDetailPR/queryCompetitorForOne\", {id: this.query.id}, (data) => {\n                    this.basicInfo = data.basicInfo\n                })\n                if(!this.addLabel.length){\n                    this.$post(\"/crm/extFieldPR/getField\", {tableName: 'crm_competitor'}, (data) => {\n                        this.addLabel = data.list;\n                    })\n                }\n            },\n\n            //  编辑\n            edit(){\n                this.activeName = 'first'\n                this.isEdit = true  \n            },\n            //  取消编辑\n            cancelEdit(){\n                this.isEdit = false\n                this.$refs.form.resetFields()\n            },\n            //  保存编辑\n            editSave(){\n                this.$post(\"/crm/competitorPR/modifyOne\", this.basicInfo, (data) => {\n                    this.$message.success(\"修改成功！\")\n                    this.isEdit = false\n                })\n            },\n            //  删除\n            del(){\n                this._confirm('确定删除吗?', () => {\n                    this.$post('/crm/competitorPR/delete', {\"list\": [this.basicInfo.id]}, (data) => {\n                        this.$message.success(\"删除成功！\")\n                        this.$router.back(-1)\n                    })\n                })\n            },\n/**------------------------------------------------附件----------------------------------------------------- */\n            //  获取附件列表\n            getAttachs(){\n                this.$post(\"/crm/getAttachs\", {parentId: this.basicInfo.id}, (data) => {\n                    this.annexList = data.list\n                })\n            },\n            //  删除附件\n            delAnnex(id, index){\n                this._confirm('确定删除吗?', () => {\n                    this.$post(\"/crm/deleteFile\", {ids: [id]}, (data) => {\n                    this.$message.success(\"删除成功\")\n                    this.annexList.splice(index, 1)\n                    })\n                })\n            },\n            //  下载附件\n            downLoadAnnex(id){\n                console.log('下载')\n            },\n            //  关闭附件模态框\n            closeAnnexModal(){\n                this.annexRemarks = '',\n                this.files = []\n            },\n            //  打开选择文件\n            chooseAnnex(){\n                this.$refs.annexInput.click()\n            },\n            //  选择文件\n            changeFile(e){\n                let files = this.$refs.annexInput.files\n                for(let i=0; i< files.length; i++){\n                    this.files.push(files[i])\n                }\n                this.$refs.annexInput.value = ''\n            },\n            //  删除待上传文件\n            delFile(index){\n                this.files.splice(index, 1)\n            },\n            //  上传附件\n            annexSave(){\n                if(!this.files.length){\n                    this.$message.error(\"请选择上传文件！\")\n                    return\n                }\n                let params = new FormData()\n                this.files.map((item, index) => {\n                    params.append(\"file\" + index, item)\n                })\n                params.append(\"remark\", this.annexRemarks)\n                params.append(\"parentId\", this.basicInfo.id)\n                this.$post(\"/crm/upfile2\", params, (data) => {\n                    this.$message.success(\"上传成功！\")\n                    this.dialogAnnexVisible = false\n                    this.getAttachs()\n                })\n            },\n            \n        }\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    .handle-box{\n        background: #fff;\n        padding: 20px 15px 10px;\n        position: relative;\n        z-index: 10;\n        .header-top{\n            margin-bottom: 10px;\n            .header-name{\n                font-size: 20px;\n                font-weight: bold;\n                i{\n                    font-size: 22px;\n                    color: #0090ff;\n                }\n            }\n        }\n        .el-button--primary{\n            background: #fff;\n            color: #0090ff;\n        }\n    }\n    .main{\n        .el-tabs{\n            background: #fff;\n            height: 100%;\n        }\n        .tab-item{\n            display: block;\n            width: 100px;\n            text-align: center;\n        }\n    }\n    .first{\n        overflow: hidden;\n        font-size: 14px;\n        padding: 20px 20px;\n        .form{\n            width: 1100px;\n            .el-form-item{\n                width: 520px;\n            }\n            .el-input, .el-cascader, .el-select, .el-textarea {\n                width: 330px;\n            }\n        }\n    }\n    .second, .third{\n        padding: 20px;\n        >.el-button{\n            margin: 20px 0;\n        }\n    }\n    .fourth, .fifth{\n        padding: 20px;\n    }\n    .operating{\n        color: #0090ff;\n        margin: 0 10px;\n        &.iconfont{\n            font-size: 20px;\n            margin: 0 5px;\n        }\n    }\n    .dialogReceipt, .dialogInvoicing, .dialogTransfer, .dialogEdit, .dialogDeploy{\n        .el-input, .el-select, .el-textarea{\n            width: 330px;\n        }\n    }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/page/competitor_detail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"handle-box\"},[_c('div',{staticClass:\"header-top\"},[_c('span',{staticClass:\"header-name\"},[_vm._v(_vm._s(_vm.basicInfo.name))])]),_vm._v(\" \"),_c('el-row',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},nativeOn:{\"click\":function($event){return _vm.goBack($event)}}},[_vm._v(\"返回\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.edit}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.del}},[_vm._v(\"删除\")])],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"height\":\"20px\",\"background\":\"#fafafa\"}}),_vm._v(\" \"),_c('div',{staticClass:\"main\"},[_c('el-tabs',{model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"name\":\"first\"}},[_c('span',{staticClass:\"tab-item\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\"基本信息\")]),_vm._v(\" \"),_c('div',{staticClass:\"first\"},[_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEdit),expression:\"isEdit\"}],staticStyle:{\"margin-bottom\":\"20px\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.editSave}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\",\"size\":\"mini\"},on:{\"click\":_vm.cancelEdit}},[_vm._v(\"取消\")])],1),_vm._v(\" \"),_c('el-form',{ref:\"form\",staticClass:\"form\",attrs:{\"inline\":true,\"model\":_vm.basicInfo,\"label-position\":\"left\",\"label-width\":\"120px\",\"size\":\"small\"}},_vm._l((_vm.addLabel),function(item,index){return _c('el-form-item',{key:index,attrs:{\"label\":item.label,\"prop\":item.name}},[(item.editorType == 'text')?_c('el-input',{attrs:{\"type\":\"textarea\",\"resize\":\"none\",\"autosize\":\"\",\"disabled\":!_vm.isEdit || item.name == 'name',\"prop\":item.name},model:{value:(_vm.basicInfo[item.name]),callback:function ($$v) {_vm.$set(_vm.basicInfo, item.name, $$v)},expression:\"basicInfo[item.name]\"}}):_vm._e(),_vm._v(\" \"),(item.editorType == 'date')?_c('el-date-picker',{attrs:{\"disabled\":!_vm.isEdit,\"value-format\":\"yyyy-MM-dd HH:mm\",\"format\":\"yyyy-MM-dd HH:mm\",\"type\":\"datetime\",\"placeholder\":\"选择日期时间\"},model:{value:(_vm.basicInfo[item.name]),callback:function ($$v) {_vm.$set(_vm.basicInfo, item.name, $$v)},expression:\"basicInfo[item.name]\"}}):_vm._e(),_vm._v(\" \"),(item.editorType == 'dict')?_c('el-select',{attrs:{\"disabled\":!_vm.isEdit},model:{value:(_vm.basicInfo[item.name]),callback:function ($$v) {_vm.$set(_vm.basicInfo, item.name, $$v)},expression:\"basicInfo[item.name]\"}},_vm._l((item.selectList),function(value){return (item.editorType == 'dict')?_c('el-option',{key:value,attrs:{\"label\":value,\"value\":value}}):_vm._e()})):_vm._e(),_vm._v(\" \"),(item.editorType == 'cascade')?_c('el-cascader',{attrs:{\"disabled\":!_vm.isEdit,\"size\":\"small\",\"options\":_vm.cityData()},model:{value:(_vm.basicInfo[item.name]),callback:function ($$v) {_vm.$set(_vm.basicInfo, item.name, $$v)},expression:\"basicInfo[item.name]\"}}):_vm._e()],1)}))],1)]),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"name\":\"second\"}},[_c('span',{staticClass:\"tab-item\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\"机会\")]),_vm._v(\" \"),_c('div',{staticClass:\"second\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"max-height\":\"500\",\"border\":\"\",\"row-style\":{'text-align': 'center', 'color': '#333'},\"header-cell-style\":{'text-align': 'center', 'background': '#f2f2f2', 'border-color': '#fff', 'color': '#333'}}},[_c('el-table-column',{attrs:{\"prop\":\"date\",\"label\":\"机会名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"预计营销金额\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"营销阶段\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"赢单率\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"备注\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"创建时间\"}})],1)],1)]),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"name\":\"third\"}},[_c('span',{staticClass:\"tab-item\",attrs:{\"slot\":\"label\"},on:{\"click\":_vm.getAttachs},slot:\"label\"},[_vm._v(\"附件\")]),_vm._v(\" \"),_c('div',{staticClass:\"third\"},[_c('el-button',{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.dialogAnnexVisible = true}}},[_vm._v(\"上传附件\")]),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.annexList,\"max-height\":\"500\",\"border\":\"\",\"row-style\":{'text-align': 'center', 'color': '#333'},\"header-cell-style\":{'text-align': 'center', 'background': '#f2f2f2', 'border-color': '#fff', 'color': '#333'}}},[_c('el-table-column',{attrs:{\"prop\":\"fileName\",\"label\":\"附件名称\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"fileSizeStr\",\"label\":\"大小\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"remark\",\"label\":\"备注\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"upUserCname\",\"label\":\"上传人\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"创建时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                                \"+_vm._s(_vm.formatDate(new Date(scope.row.upTime), 'yyyy-MM-dd hh:mm:ss'))+\"\\n                            \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('a',{staticClass:\"operating\",on:{\"click\":function($event){_vm.downLoadAnnex(scope.row.id)}}},[_vm._v(\"下载\")]),_vm._v(\" \"),_c('a',{staticClass:\"operating\",on:{\"click\":function($event){_vm.delAnnex(scope.row.id, scope.$index)}}},[_vm._v(\"删除\")])]}}])})],1)],1)]),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"name\":\"fourth\"}},[_c('span',{staticClass:\"tab-item\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\"操作日志\")]),_vm._v(\" \"),_c('div',{staticClass:\"fourth\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"max-height\":\"500\",\"border\":\"\",\"row-style\":{'text-align': 'center', 'color': '#333'},\"header-cell-style\":{'text-align': 'center', 'background': '#f2f2f2', 'border-color': '#fff', 'color': '#333'}}},[_c('el-table-column',{attrs:{\"prop\":\"date\",\"label\":\"操作时间\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"操作人\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"操作类型\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"备注\"}})],1)],1)])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"上传附件\",\"visible\":_vm.dialogAnnexVisible,\"close-on-click-modal\":false,\"width\":\"550px\"},on:{\"update:visible\":function($event){_vm.dialogAnnexVisible=$event},\"close\":_vm.closeAnnexModal}},[_c('el-form',{attrs:{\"labelPosition\":\"left\",\"label-width\":\"60px\"}},[_c('el-form-item',{attrs:{\"label\":\"附件：\"}},[_c('div',[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.chooseAnnex}},[_vm._v(\"选择文件\")]),_c('span',{staticStyle:{\"color\":\"#409EFF\",\"margin-left\":\"10px\"}},[_vm._v(\"单个文件最大支持100MB，上传请耐心等待\")]),_vm._v(\" \"),_vm._l((_vm.files),function(item,index){return _c('p',{key:index,staticStyle:{\"line-height\":\"24px\"}},[_vm._v(_vm._s(item.name)+\"\\n                        \"),_c('a',{staticStyle:{\"float\":\"right\",\"color\":\"#409EFF\"},on:{\"click\":function($event){_vm.delFile(index)}}},[_vm._v(\"删除\")])])})],2),_vm._v(\" \"),_c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"annexInput\",attrs:{\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":_vm.changeFile}})]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"备注：\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"resize\":\"none\",\"autosize\":{ minRows: 2},\"maxlength\":\"200\",\"placeholder\":\"请填写备注(200字以内)\"},model:{value:(_vm.annexRemarks),callback:function ($$v) {_vm.annexRemarks=$$v},expression:\"annexRemarks\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogAnnexVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.annexSave}},[_vm._v(\"保存\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-59e757b5\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/competitor_detail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-59e757b5\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./competitor_detail.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./competitor_detail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./competitor_detail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-59e757b5\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./competitor_detail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-59e757b5\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/competitor_detail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}